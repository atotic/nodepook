<link href="/vendor/polymer/polymer.html" rel="import">
<link href="/vendor/core-drawer-panel/core-drawer-panel.html" rel="import">
<link href="/vendor/core-header-panel/core-header-panel.html" rel="import">
<link href="/vendor/core-item/core-item.html" rel="import">
<link href="/vendor/core-menu/core-menu.html" rel="import">
<link href="/vendor/core-pages/core-pages.html" rel="import">
<link href="/vendor/core-toolbar/core-toolbar.html" rel="import">
<link href="/vendor/paper-icon-button/paper-icon-button.html" rel="import">
<link href="/vendor/paper-item/paper-item.html" rel="import">

<link href="/views/el/pook-account-editor.html" rel="import">
<link href="/views/el/pook-fire-user.html" rel="import">
<link href="/views/el/pook-security-editor.html" rel="import">

<polymer-element name='pook-main-app'>
  <template>
   <style>    
      core-toolbar, core-toolbar::shadow .toolbar-tools {
        height: 36px;
      }
      [drawer] {
        background-color: #E9EDEF;
      }
      core-pages {
      }
      paper-item.core-selected::shadow div {
        font-weight: bold;
      }

      core-pages > * {
        margin: 0 8px 0 8px;
      }

    </style>

    <pook-fire-user id='fireUser' anonRedirect='/'></pook-fire-user>
    <core-drawer-panel id='drawerPanel' drawerWidth="8em">
      <core-header-panel drawer>
        <core-toolbar></core-toolbar>

        <core-menu id='menu' on-core-select="{{selectPane}}" selected="0">
          <paper-item icon='account-box' label='account'></paper-item>
          <paper-item icon='https' label='security'></paper-item>
          <paper-item icon='drive-drawing' label='photos'></paper-item>
          <paper-item icon='content-copy' label='books'></paper-item>
        </core-menu>
      </core-header-panel>
      <core-header-panel flex main>
        <core-toolbar>
          <paper-icon-button id="navicon" 
            icon="menu" 
            on-down="{{toggleDrawer}}" 
            style="display:{{$.drawerPanel.narrow ? 'inline-block' : 'none'}}"
          ></paper-icon-button>
          <span flex>node.pook.io</span>
          <paper-button label='logout' on-click='{{logout}}'></paper-button>
        </core-toolbar>
        <div class='content'>
          <core-pages id='pages' selected='{{$.menu.selected}}'>
            <pook-account-editor></pook-account-editor>
            <pook-security-editor></pook-security-editor>
            <div>photos</div>
            <div>books</div>
          </core-pages>
        </div>
      </core-header-panel>
    </core-drawer-panel>
  </template>
  <script>
  Polymer('pook-main-app', {
    selectPane: function(ev, detail) {
      this.$.drawerPanel.closeDrawer();
    },
    logout: function() {
      this.$.fireUser.logout();
    },
    toggleDrawer: function() {
      this.$.drawerPanel.togglePanel();
    }
  });
  </script>
</polymer-element>

