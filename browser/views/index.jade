extends layout

block content
  link(rel='import', href='views/el/pook-flash.html')
  link(rel='import', href='views/el/pook-form.html')
  pook-flash
  h1= title

  form#login(is='pook-form', action="/auth/login", method="post")
    h3 Login
    label Email:
      br
      input(type="text", name="email")
    br
    label Password:
      br
      input(type="password", name="password" pattern=".{8,}")
    br
    input(type="submit", value="Login")
    p.small Forgot your password?
    p#showRegistration.small Would you like to register?
  form#register(is='pook-form', action="/auth/register", method="post", style='display:none')
    h3 Register
    label Email:
      br
      input(type="text", name="email")
    br
    label Password:
      br
      input(type="password", name="password" pattern=".{8,}")
    br
    input(type="submit", value="Register")
    p#showLogin.small Login instead?


  style.
    #showRegistration, #showLogin { cursor: pointer }
  script.
    function showUser() { window.location.pathname = '/user'; }
    document.querySelector('#login').addEventListener('success', showUser);
    document.querySelector('#register').addEventListener('success', showUser);

    document.querySelector('#showRegistration').addEventListener('click', function(xhr) {
      document.querySelector('#login').style.display = 'none';
      document.querySelector('#register').style.display = 'block';
    });
    document.querySelector('#showLogin').addEventListener('click', function(xhr) {
      document.querySelector('#login').style.display = 'block';
      document.querySelector('#register').style.display = 'none';
    });

