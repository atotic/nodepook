<polymer-element name='pook-debug'>
  <template></template>
  <script>
    (function() {

      function findUnregisteredCustomElements(el) {
        if (el.constructor == HTMLElement) {
          console.error("Found unregistered custom element:", el);
        }
      }
      
      function isCustomEl(el) {
        return el.localName.indexOf('-') != -1 || el.getAttribute('is');
      }
      
      function checkCustomElements() {
        var allCustomElements = document.querySelectorAll('html /deep/ *');
        allCustomElements = Array.prototype.slice.call(allCustomElements).filter(function(el) {
          return isCustomEl(el);
        });
        for (var i = 0, el; el = allCustomElements[i]; ++i)
          findUnregisteredCustomElements(el);        
      }
      
      function check() {
        checkCustomElements();
        var waitFor = Polymer.waitingFor();
        if (waitFor.length > 0)
          console.error("Unresolved elements", waitFor);
        if (!document.doctype || document.doctype.name != "html")
          console.error("Polymer documents will not render correctly without doctype");        
      }
      
      document.addEventListener('polymer-ready', function() {
      });

      Polymer('pook-debug', {
        created: function() {
          setTimeout(check, 1);
        }
      });

    })();
  </script>

</polymer-element>
